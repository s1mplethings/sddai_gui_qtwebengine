{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Pipeline Graph Meta",
  "type": "object",
  "required": [
    "schema_version",
    "phases",
    "modules",
    "contracts",
    "edges"
  ],
  "properties": {
    "schema_version": {
      "type": "string"
    },
    "phases": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "id",
          "order"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "label": {
            "type": "string"
          },
          "order": {
            "type": "integer"
          }
        },
        "additionalProperties": true
      }
    },
    "modules": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "id",
          "path"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "label": {
            "type": "string"
          },
          "path": {
            "type": "string"
          },
          "phase": {
            "type": "string"
          },
          "tier": {
            "type": "string"
          },
          "mutable": {
            "type": "boolean"
          },
          "pinned": {
            "type": "boolean"
          },
          "category": {
            "type": "string"
          }
        },
        "additionalProperties": true
      }
    },
    "contracts": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "id",
          "schema_path"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "label": {
            "type": "string"
          },
          "schema_path": {
            "type": "string"
          },
          "tier": {
            "type": "string"
          },
          "mutable": {
            "type": "boolean"
          },
          "pinned": {
            "type": "boolean"
          },
          "category": {
            "type": "string"
          }
        },
        "additionalProperties": true
      }
    },
    "edges": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "source",
          "target",
          "type"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "source": {
            "type": "string"
          },
          "target": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "produces",
              "consumes",
              "verifies",
              "docs_link"
            ]
          },
          "label": {
            "type": "string"
          },
          "aggregate": {
            "type": "boolean"
          },
          "weight": {
            "type": "integer"
          }
        },
        "additionalProperties": true
      }
    },
    "positions": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "x": {
            "type": "number"
          },
          "y": {
            "type": "number"
          }
        }
      }
    },
    "ui": {
      "type": "object",
      "properties": {
        "default_view": {
          "type": "string"
        },
        "summary": {
          "type": "object",
          "properties": {
            "categories": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "pinned": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "grid": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    }
  },
  "additionalProperties": true
}
